<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live Silver Value for UK Coins</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #888; padding: 8px; text-align: center; }
        th { background: #eee; }
    </style>
</head>
<body>
    <h1>Live Silver Values for UK Coins (1911–1919)</h1>
    <p>Spot price (silver, GBP/oz): <strong id="spotPrice">Loading...</strong></p>

    <table>
        <thead>
            <tr>
                <th>Coin</th>
                <th>Fine Silver (oz)</th>
                <th>Value (£)</th>
            </tr>
        </thead>
        <tbody id="coinRows">
            <!-- Dynamic rows here -->
        </tbody>
    </table>

    <script>
        const coins = [
            { name: 'Crown', fineOz: 0.666 },
            { name: 'Half Crown', fineOz: 0.420 },
            { name: 'Florin', fineOz: 0.336 },
            { name: 'Shilling', fineOz: 0.168 },
            { name: 'Sixpence', fineOz: 0.084 }
        ];

        async function fetchSilverSpotGBP() {
            const apiKey = "YOUR_API_KEY"; 
            const url = `https://api.metals-api.com/v1/latest?access_key=${apiKey}&base=GBP&symbols=XAG`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                if (data && data.rates && data.rates.XAG) {
                    const spotPrice = data.rates.XAG; // GBP per troy ounce
                    document.getElementById("spotPrice").textContent = "£" + spotPrice.toFixed(2);

                    const tbody = document.getElementById("coinRows");
                    tbody.innerHTML = "";

                    coins.forEach(coin => {
                        const value = (coin.fineOz * spotPrice).toFixed(2);
                        tbody.innerHTML += `
                            <tr>
                                <td>${coin.name}</td>
                                <td>${coin.fineOz.toFixed(3)}</td>
                                <td>£${value}</td>
                            </tr>`;
                    });
                } else {
                    document.getElementById("spotPrice").textContent = "Error retrieving price";
                }
            } catch (err) {
                document.getElementById("spotPrice").textContent = "Error loading data";
                console.error(err);
            }
        }

        fetchSilverSpotGBP();
    </script>
</body>
</html>
